webpackJsonp([34],{Im35:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("ajGf"),o={data:function(){return{activeTab:"",tabList:[{title:"主推商品管理",path:"/goods-activity/activity/commission/itemList"},{title:"分佣分类",path:"/goods-activity/activity/commission/classification"},{title:"分佣订单明细",path:"/goods-activity/activity/commission/orderInfo"},{title:"分佣订单汇总",path:"/goods-activity/activity/commission/orderAll"}],isJointo:"",commissionConfig:"",is_quit:"",cancel_time:"",valid_time:"",exitTs:!1,allRate:"",list:[],ratesBox:!1,data_categories:{categories:[]}}},watch:{$route:function(){var t=window.location.href.split(".com");this.activeTab=t[1]}},methods:{isCategoryInitialized:function(){var t=this;a.a.isCategoryInitialized().then(function(i){i.data||(t.ratesBox=!0,t.getNeedSetCategories())})},tabClick:function(t){this.$route.path!==this.activeTab&&this.$router.push({path:this.activeTab})},getNeedSetCategories:function(){var t=this;a.a.getNeedSetCategories().then(function(i){for(var e in t.list=[],i.data)t.list.push(i.data[e]),t.$set(i.data[e],"rate","")})},setShopCategory:function(t){var i=this;a.a.setShopCategory(t).then(function(t){i.$message({type:"success",message:"设置成功!"}),i.ratesBox=!1,window.location.reload()})},clickRate:function(){var t=this;this.data_categories.categories=[],this.list.map(function(i){var e={category_id:"",rate:""};e.category_id=i.category_id,e.rate=i.rate,t.data_categories.categories.push(e)}),this.setShopCategory(this.data_categories)},allClickRate:function(){var t=this;this.list.map(function(i){i.rate=t.allRate})},exitCommission:function(){var t=this;this.$confirm("正在退出分佣计划, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.a.exitCommission().then(function(i){t.$message({type:"success",message:"退出成功!"}),location.reload()}).catch(function(t){this.$message({type:"error",message:"退出失败!"})})}).catch(function(){t.$message({type:"info",message:"已取消退出"})})},joinCommission:function(){this.is_quit?this.exitTs=!0:this.isCategoryInitialized()},tabFixbug:function(){var t=window.location.href.split(".com");this.activeTab=t[1]},isJoin:function(){var t=this;a.a.isJoin().then(function(i){!i.data.is_join&&i.data.is_quit&&(t.exitTs=!0),t.isJointo=i.data.is_join,t.commissionConfig=i.data.commissionConfig,t.is_quit=i.data.is_quit,t.cancel_time=i.data.cancel_time,t.valid_time=i.data.valid_time})}},created:function(){this.isJoin(),this.tabFixbug()}},s={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"commission"},[t.isJointo?e("div",[e("el-button",{attrs:{type:"primary"},on:{click:t.exitCommission}},[t._v("退出分佣计划")]),t._v(" "),e("p",[t._v("注：买家在您退出推广前（包括推出后"),null!=t.commissionConfig?e("span",[t._v(t._s(t.commissionConfig.cancel))]):t._e(),t._v("小时内）点击的推广链接，成交后均按您设置的佣金比率计算佣金。")]),t._v(" "),e("p",[t._v("退出"),null!=t.commissionConfig?e("span",[t._v(t._s(t.commissionConfig.cancel))]):t._e(),t._v("小时及以后点击的推广链接，将不计算佣金。同时退出"),null!=t.commissionConfig?e("span",[t._v(t._s(t.commissionConfig.quit))]):t._e(),t._v("日内不能再申请参加推广。")])],1):t._e(),t._v(" "),t.isJointo?t._e():e("div",[e("el-button",{attrs:{type:"primary"},on:{click:t.joinCommission}},[t._v("加入分佣计划")]),t._v(" "),e("p"),t._v(" "),e("el-dialog",{attrs:{title:"提示",visible:t.exitTs,width:"40%",center:""},on:{"update:visible":function(i){t.exitTs=i}}},[e("p",[t._v("抱歉！您于（"+t._s(t.cancel_time)+"）退出分佣计划，小泰联盟将不再推广您的商品。退出后"+t._s(t.commissionConfig.cancel)+"小时点击的推广链接，将不计算佣金。")]),t._v(" "),e("p",[t._v("您在"+t._s(t.commissionConfig.quit)+"天之后可以再次加入分佣计划")]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(i){t.exitTs=!1}}},[t._v("确 定")])],1)])],1),t._v(" "),e("el-dialog",{attrs:{title:"分类佣金设置",visible:t.ratesBox,"show-close":!1,"close-on-click-modal":!1,width:"40%",center:""},on:{"update:visible":function(i){t.ratesBox=i}}},[e("p",[t._v("以下分类您还没有设置分佣比率，请自行设置")]),t._v(" "),e("p",{staticStyle:{color:"red"}},[t._v("提醒：您店铺内非主推商品，将按照类目分佣金计算。请合理设置")]),t._v(" "),e("p",{staticStyle:{"text-align":"center"}},[e("el-input",{staticStyle:{width:"100px",display:"inline-block"},model:{value:t.allRate,callback:function(i){t.allRate=t._n(i)},expression:"allRate"}}),t._v("\n        %\n        "),e("el-button",{staticStyle:{"margin-left":"40px"},on:{click:t.allClickRate}},[t._v("批量设置")])],1),t._v(" "),e("el-table",{staticClass:"table",attrs:{data:t.list,border:"",align:"center"}},[e("el-table-column",{attrs:{align:"center",label:"类目名",prop:"name"}}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"设置佣金比率"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-input",{staticStyle:{width:"100px"},model:{value:i.row.rate,callback:function(e){t.$set(i.row,"rate",t._n(e))},expression:"scope.row.rate"}}),t._v("%\n              ")]}}])})],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.clickRate}},[t._v("确 定")])],1)],1),t._v(" "),e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.activeTab,callback:function(i){t.activeTab=i},expression:"activeTab"}},[t._l(t.tabList,function(t){return e("el-tab-pane",{key:t.path,attrs:{label:t.title,name:t.path}})}),t._v(" "),e("router-view")],2)],1)},staticRenderFns:[]};var n=e("C7Lr")(o,s,!1,function(t){e("zfhu")},"data-v-ea18622e",null);i.default=n.exports},zfhu:function(t,i){}});