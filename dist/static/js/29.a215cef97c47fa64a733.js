webpackJsonp([29],{COTu:function(e,t,a){"use strict";var n=a("2AkA");t.a={getGroupList:function(e){return Object(n.a)({method:"get",url:"/trmall/groupbuy/getGroupBuyList",params:e})},downGroup:function(e){return Object(n.a)({method:"post",url:"/trmall/groupbuy/closeGroupBuyItem",data:e})},importItemsById:function(e){return Object(n.a)({method:"post",url:"/trmall/itemselect/importItems",data:e})},createGroupBuy:function(e){return Object(n.a)({method:"post",url:"/trmall/groupbuy/createGroupBuy",data:e})}}},Tdif:function(e,t){},nUwm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("1G+u"),i=a("VXZc"),r=a("COTu"),o={data:function(){var e=this;return{form:{page:1,page_size:20},groupList:[],total:0,columns:[{label:"商品ID",field:"item_id",align:"center"},{label:"拼团类型",field:"group_type",align:"center"},{label:"最高开团数",field:"open_group_number",align:"center"},{label:"商品名称",align:"center",isGood:2},{label:"标准售价",field:"sell_price",align:"center"},{label:"拼团价",field:"price",align:"center"},{label:"拼团人数",field:"group_person",align:"center"},{label:"每人最多参团次数",field:"user_max_join",align:"center"},{label:"拼团成功",field:"verify_success_count",align:"center"},{label:"拼团开始时间",field:"start_time",align:"center"},{label:"拼团结束时间",field:"end_time",align:"center"},{label:"报名时间",field:"created_at",align:"center"},{label:"活动状态",field:"status",align:"center",width:110,tags:[{index:10,name:"即将开始",type:"danger"},{index:20,name:"已发布",type:"success"},{index:30,name:"进行中",type:"success"},{index:40,name:"已结束",type:"info"},{index:50,name:"已关闭",type:"warning"},{index:"/",name:"/",type:"info"}]},{label:"审核状态",field:"verify_status",align:"center"},{label:"驳回原因",field:"refuse_reason",align:"center"},{label:"操作",align:"center",actions:[{label:"关闭",type:"text",size:"medium",disable:function(e,t){return!(1==e.item_status&&30==e.status||10==e.status&&"审核通过"==e.verify_status)},click:function(t,a){e.$confirm("拼团活动将会失效，确定关闭？","关闭提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.downGroup({promotion_id:a.promotion_id,item_id:a.item_id})}).catch(function(){e.$message({type:"info",message:"已取消关闭"})})}}]}]}},methods:{getGroupList:function(e){var t=this;r.a.getGroupList(e).then(function(e){for(var a in t.total=e.data.total_count,t.groupList=[],e.data.data){switch(e.data.data[a].group_type){case"Normal":e.data.data[a].group_type="普通拼团";break;case"Rookie":e.data.data[a].group_type="新人拼团"}switch(e.data.data[a].verify_status){case"agree":e.data.data[a].verify_status="审核通过";break;case"refuse":e.data.data[a].verify_status="审核拒绝";break;case"pending":e.data.data[a].verify_status="审核中"}switch(e.data.data[a].open_group_number){case 0:e.data.data[a].open_group_number="/"}t.groupList.push(e.data.data[a])}}).catch(function(e){console.log(e)})},downGroup:function(e){var t=this;r.a.downGroup(e).then(function(e){t.$message({message:"关闭成功",type:"success"}),t.getGroupList(t.form)}).catch(function(e){console.log(e)})},sizeChange:function(e){this.form.page_size=e,this.getGroupList(this.form)},pageChange:function(e){this.form.page=e,this.getGroupList(this.form)},addGroup:function(){this.$router.push({name:"addGroup"})}},components:{TableView:n.a,PaginationView:i.a},created:function(){this.getGroupList(this.form)}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"group"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addGroup}},[e._v("添加拼团活动")]),e._v(" "),a("p"),e._v(" "),a("table-view",{attrs:{columns:e.columns,pageList:e.groupList}}),e._v(" "),a("pagination-view",{attrs:{currentPage:e.form.page,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)},staticRenderFns:[]};var u=a("C7Lr")(o,s,!1,function(e){a("Tdif")},"data-v-897e1300",null);t.default=u.exports}});