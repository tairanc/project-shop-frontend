webpackJsonp([73],{HYVJ:function(e,o){},NFMb:function(e,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=n("1G+u"),i=n("TwMp"),r=/^[1][3,4,5,7,8][0-9]{9}$/,s=/^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\.)+(com|cn|net|org)$/,a=/^(?!\d+$|[a-zA-Z]+$)[^\u4e00-\u9fa5]*$/,l={data:function(){var e=this;return{loading:!1,disabled:!0,openUpAdmin:!1,formOnAdminInfo:{form:{name:"",mobile:"",email:"",role_id:"",id:""},account:""},role_list:[],rules:{name:[{validator:function(e,o,n){if(!o)return n(new Error("姓名必填"));n()},trigger:"blur"}],mobile:[{validator:function(e,o,n){return o?o.length>11||!r.test(o)?n(new Error("请输入11位有效号码")):void n():n(new Error("手机号必填"))},trigger:"blur"}],email:[{validator:function(e,o,n){return o?o.length>50||!s.test(o)?n(new Error("请输入有效的email")):void n():n(new Error("邮箱必填"))},trigger:"blur"}],role_id:[{validator:function(e,o,n){if(!o)return n(new Error("角色必填"));n()},trigger:"blur"}]},list:[],ps_from:{id:"",password:"",confirm_password:""},centerDialogVisible:!1,columns:[{label:"登录账号",field:"account",align:"center"},{label:"角色",field:"role_name",align:"center"},{label:"手机号码",field:"mobile",align:"center"},{label:"邮箱",field:"email",align:"center"},{label:"操作",align:"center",actions:[{label:"编辑",type:"primary",size:"mini",click:function(o,n){e.openUpAdmin=!0,e.getInfo({id:n.id}),e.formOnAdminInfo.form.id=n.id}},{label:"修改密码",type:"primary",size:"mini",click:function(o,n){e.centerDialogVisible=!0,e.ps_from.id="",e.ps_from.password="",e.ps_from.confirm_password="",e.ps_from.id=n.id}},{label:"删除",type:"danger",size:"mini",click:function(o,n){i.a.delAdmin({id:n.id}).then(function(o){0===o.code&&(e.$message({type:"success",message:"删除成功！"}),e.getAdminList())})}}]}]}},methods:{addAdmin:function(){this.$router.push({name:"addAdmin"})},getAdminList:function(){var e=this;i.a.getAdminList().then(function(o){for(var n in e.list=[],o.data.data)e.list.push(o.data.data[n])})},restPassWord:function(e){var o=this;i.a.restPassWord(e).then(function(e){o.$message({type:"success",message:"重置成功"}),o.centerDialogVisible=!1})},getInfo:function(e){var o=this;i.a.getAdminInfo(e).then(function(e){for(var n in o.role_list=[],o.formOnAdminInfo.form.name=e.data.name,o.formOnAdminInfo.form.mobile=e.data.mobile,o.formOnAdminInfo.form.email=e.data.email,o.formOnAdminInfo.form.role_id=e.data.role_id,o.formOnAdminInfo.account=e.data.account,e.data.role_list)o.role_list.push(e.data.role_list[n])})},upDataInfo:function(e){var o=this;i.a.upDataInfo(e).then(function(e){o.$message({type:"success",message:"编辑成功"}),o.openUpAdmin=!1,o.getAdminList()})},clickUpInfo:function(){var e=this;this.$refs.formOnAdminInfo.validate(function(o){o?(e.upDataInfo(e.formOnAdminInfo.form),e.getAdminList()):e.$message({type:"error",message:"编辑失败"})})},openAdmin:function(){return this.ps_from.confirm_password!=this.ps_from.password?(this.$message({type:"error",message:"密码不一致"}),!1):""==this.ps_from.confirm_password||""==this.ps_from.password?(this.$message({type:"error",message:"密码不能为空"}),!1):this.ps_from.confirm_password.length<6||this.ps_from.password.length<6?(this.$message({type:"error",message:"密码长度不能小于6个字符"}),!1):a.test(this.ps_from.confirm_password)&&a.test(this.ps_from.password)?void this.restPassWord(this.ps_from):(this.$message({type:"error",message:"密码不能为纯数字"}),!1)}},components:{TableView:t.a},created:function(){this.getAdminList()}},m={render:function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("div",{staticClass:"manage"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"primary"},on:{click:e.addAdmin}},[e._v("添加账号")])],1)],1),e._v(" "),n("el-tabs",[n("table-view",{attrs:{loading:e.loading,columns:e.columns,pageList:e.list}})],1),e._v(" "),n("el-dialog",{attrs:{title:"编辑",visible:e.centerDialogVisible,width:"50%",center:""},on:{"update:visible":function(o){e.centerDialogVisible=o}}},[n("div",[n("el-form",[n("el-row",[n("el-col",{attrs:{span:20,offset:1}},[n("el-form-item",{attrs:{label:"重置密码:"}},[n("el-input",{attrs:{type:"password"},model:{value:e.ps_from.password,callback:function(o){e.$set(e.ps_from,"password",o)},expression:"ps_from.password"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:20,offset:1}},[n("el-form-item",{attrs:{label:"确认密码:"}},[n("el-input",{attrs:{type:"password"},model:{value:e.ps_from.confirm_password,callback:function(o){e.$set(e.ps_from,"confirm_password",o)},expression:"ps_from.confirm_password"}})],1)],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(o){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.openAdmin}},[e._v("确 定")])],1)]),e._v(" "),n("el-dialog",{attrs:{title:"编辑账号",visible:e.openUpAdmin,width:"60%",center:""},on:{"update:visible":function(o){e.openUpAdmin=o}}},[n("el-form",{ref:"formOnAdminInfo",attrs:{model:e.formOnAdminInfo.form,rules:e.rules,"label-position":"left"}},[n("el-form-item",{attrs:{prop:"account",label:"用户名:"}},[n("el-input",{attrs:{disabled:e.disabled},model:{value:e.formOnAdminInfo.account,callback:function(o){e.$set(e.formOnAdminInfo,"account",o)},expression:"formOnAdminInfo.account"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系姓名:",prop:"name"}},[n("el-input",{model:{value:e.formOnAdminInfo.form.name,callback:function(o){e.$set(e.formOnAdminInfo.form,"name",o)},expression:"formOnAdminInfo.form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系手机:",prop:"mobile"}},[n("el-input",{model:{value:e.formOnAdminInfo.form.mobile,callback:function(o){e.$set(e.formOnAdminInfo.form,"mobile",o)},expression:"formOnAdminInfo.form.mobile"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系邮箱:",prop:"email"}},[n("el-input",{model:{value:e.formOnAdminInfo.form.email,callback:function(o){e.$set(e.formOnAdminInfo.form,"email",o)},expression:"formOnAdminInfo.form.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"选择角色:",prop:"role_id"}},[n("el-radio-group",{model:{value:e.formOnAdminInfo.form.role_id,callback:function(o){e.$set(e.formOnAdminInfo.form,"role_id",o)},expression:"formOnAdminInfo.form.role_id"}},e._l(e.role_list,function(o){return n("el-radio",{key:o.role_id,attrs:{label:o.role_id}},[e._v(e._s(o.name))])}),1),e._v(" "),n("div",{staticClass:"tc",staticStyle:{"margin-top":"20px"}},[n("el-button",{on:{click:function(o){e.openUpAdmin=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.clickUpInfo}},[e._v("确 定")])],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]};var f=n("C7Lr")(l,m,!1,function(e){n("HYVJ")},"data-v-4c141782",null);o.default=f.exports}});