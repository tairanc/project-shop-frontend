webpackJsonp([27],{k9KP:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("BD25"),n=r("ypf/"),a={data:function(){return{info_list:[],formOnRole:{form:{name:"",privilege_list:[]}}}},methods:{getPrivilegeList:function(){var e=this;n.a.getPrivilegeList().then(function(t){if(""!=e.info_list)for(var r in e.info_list=[],t.data)e.info_list.push(t.data[r]);else for(var r in t.data)e.info_list.push(t.data[r])})},createRole:function(e){var t=this;n.a.createRole(e).then(function(e){t.$router.push({path:"/shop-admin/permissions/role"})})},clickS:function(e){var t=this,r=this.$refs.tree.getCheckedKeys();for(var o in r)null!=r[o]&&this.formOnRole.form.privilege_list.push(r[o]);this.$refs[e].validate(function(e){""==t.formOnRole.form.name?t.$message({message:"姓名不能为空",type:"error",duration:1e3}):""==t.formOnRole.form.privilege_list?t.$message({message:"权限不能为空",type:"error",duration:1e3}):t.createRole(t.formOnRole.form)})}},components:{VHeader:o.a},created:function(){this.getPrivilegeList()}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"manage"},[r("el-tabs",{attrs:{type:"border-card"}},[r("el-form",{ref:"formOnRole",attrs:{model:e.formOnRole,"label-width":"100px",size:"medium"}},[r("h2",[e._v("添加角色")]),e._v(" "),r("el-row",[r("el-col",{attrs:{span:6,offset:1}},[r("el-form-item",{attrs:{prop:"name",label:"角色名称："}},[r("el-input",{attrs:{placeholder:"必填"},model:{value:e.formOnRole.form.name,callback:function(t){e.$set(e.formOnRole.form,"name",t)},expression:"formOnRole.form.name"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-tree",{ref:"tree",attrs:{data:e.info_list,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":""}})],1),e._v(" "),r("el-row",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickS("formOnRole")}}},[e._v("提交")]),e._v(" "),r("a",{attrs:{href:"/shop-admin/permissions/role"}},[r("el-button",[e._v("取消")])],1)],1)],1)],1)],1)])},staticRenderFns:[]};var i=r("C7Lr")(a,l,!1,function(e){r("ruEB")},"data-v-469d5069",null);t.default=i.exports},ruEB:function(e,t){},"ypf/":function(e,t,r){"use strict";var o=r("2AkA");t.a={getRoleList:function(){return Object(o.a)({method:"get",url:"/trmall/shop/getRoleList"})},delRole:function(e){return Object(o.a)({method:"post",url:"/trmall/shop/deleteRole",data:e})},getRoleInfo:function(e){return Object(o.a)({method:"get",url:"/trmall/shop/getRoleInfo",params:e})},getPrivilegeList:function(){return Object(o.a)({method:"get",url:"/trmall/shop/getPrivilegeList"})},createRole:function(e){return Object(o.a)({method:"post",url:"/trmall/shop/createRole",data:e})},updateRole:function(e){return Object(o.a)({method:"post",url:"/trmall/shop/updateRole",data:e})}}}});