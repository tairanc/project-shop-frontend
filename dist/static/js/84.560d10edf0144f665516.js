webpackJsonp([84],{bIYn:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("1G+u"),n=e("3RBe"),s=e("VXZc"),i={data:function(){var t=this;return{savaData:{appeal_id:"",content:"",images:[]},textStatus:"",active:"10",centerDialogVisible:!1,infoText:"",rate:"",formOnComplaint:{total:0,form:{start_date:"",end_date:"",status:"10",page_size:20,page:1},list:[],columns:[{label:"评论等级",field:"grade",align:"center"},{label:"订单编号",field:"order_no",align:"center"},{label:"评价时间",field:"created_at",align:"center"},{label:"评价人",field:"nickname",align:"center"},{label:"申诉进度",field:"status",align:"center"},{label:"操作",align:"center",actions:[{label:"详情",type:"text",size:"medium",click:function(a,e){t.openInfo({appeal_id:e.appeal_id})}}]}]}}},methods:{getComplaintList:function(t){var a=this;n.a.getComplaintList(t).then(function(t){a.formOnComplaint.total=t.data.total_count,a.formOnComplaint.list=[];var e=t.data.appeals;for(var o in e){e[o].rate.status=e[o].status;var n=e[o].rate.grade;switch(1==e[o].rate.is_anonymous&&(e[o].rate.nickname="**** [匿名]"),n){case 10:e[o].rate.grade="差评";break;case 20:e[o].rate.grade="中评";break;case 30:e[o].rate.grade="好评"}switch(e[o].rate.status){case 10:e[o].rate.status="等待审核";break;case 20:e[o].rate.status="已驳回";break;case 30:e[o].rate.status="已成功";break;case 40:e[o].rate.status="已取消"}a.formOnComplaint.list.push(e[o].rate),a.$set(e[o].rate,"appeal_id",e[o].id)}})},complaintSearch:function(){this.getComplaintList(this.formOnComplaint.form)},sizeChange:function(t){this.formOnComplaint.form.page_size=t,this.getComplaintList(this.formOnComplaint.form)},pageChange:function(t){this.formOnComplaint.form.page=t,this.getComplaintList(this.formOnComplaint.form)},tabClick:function(t,a){this.formOnComplaint.form.status=t.name,this.getComplaintList(this.formOnComplaint.form)},openInfo:function(t){this.info(t),this.centerDialogVisible=!0},saveInfo:function(t){var a=this;this.status?centerDialogVisible=!1:(this.savaData.content=this.infoText.content,this.savaData.images=this.rate.images,n.a.modify(t).then(function(t){a.centerDialogVisible=!1}))},info:function(t){var a=this;n.a.info(t).then(function(t){a.savaData.appeal_id=t.data.id;var e=t.data.status;switch(a.textStatus=10!=e,e){case 10:t.data.status="等待审核";break;case 20:t.data.status="已驳回";break;case 30:t.data.status="已成功";break;case 40:t.data.status="已取消"}a.infoText=t.data,a.rate=t.data.rate})}},created:function(){this.getComplaintList(this.formOnComplaint.form)},components:{TableView:o.a,PaginationView:s.a}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"rateAppeal"},[e("p"),t._v(" "),e("el-form",{ref:"formOnComplaint",attrs:{model:t.formOnComplaint.form,rules:t.formOnComplaint.rules,"label-width":"100px",size:"medium"}},[e("el-row",[e("el-col",{attrs:{span:6,offset:1}},[e("el-form-item",{attrs:{prop:"start_date",label:"开始日期："}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择开始时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.formOnComplaint.form.start_date,callback:function(a){t.$set(t.formOnComplaint.form,"start_date",a)},expression:"formOnComplaint.form.start_date"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:6,offset:1}},[e("el-form-item",{attrs:{label:"结束日期：",prop:"end_date"}},[e("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择结束时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.formOnComplaint.form.end_date,callback:function(a){t.$set(t.formOnComplaint.form,"end_date",a)},expression:"formOnComplaint.form.end_date"}})],1)],1),t._v(" "),e("el-col",{staticClass:"tc",attrs:{span:3,offset:1}},[e("el-button",{attrs:{type:"primary"},on:{click:t.complaintSearch}},[t._v("搜索")])],1)],1),t._v(" "),e("p")],1),t._v(" "),e("p"),t._v(" "),e("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("el-tab-pane",{attrs:{label:"申诉审核",name:"10"}},[e("table-view",{attrs:{loading:t.formOnComplaint.loading,columns:t.formOnComplaint.columns,pageList:t.formOnComplaint.list}}),t._v(" "),e("pagination-view",{attrs:{currentPage:t.formOnComplaint.form.page,total:t.formOnComplaint.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"审核驳回",name:"20"}},[e("table-view",{attrs:{loading:t.formOnComplaint.loading,columns:t.formOnComplaint.columns,pageList:t.formOnComplaint.list}}),t._v(" "),e("pagination-view",{attrs:{currentPage:t.formOnComplaint.form.page,total:t.formOnComplaint.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"申诉成功",name:"30"}},[e("table-view",{attrs:{loading:t.formOnComplaint.loading,columns:t.formOnComplaint.columns,pageList:t.formOnComplaint.list}}),t._v(" "),e("pagination-view",{attrs:{currentPage:t.formOnComplaint.form.page,total:t.formOnComplaint.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1),t._v(" "),e("el-tab-pane",{attrs:{label:"申诉关闭",name:"40"}},[e("table-view",{attrs:{loading:t.formOnComplaint.loading,columns:t.formOnComplaint.columns,pageList:t.formOnComplaint.list}}),t._v(" "),e("pagination-view",{attrs:{currentPage:t.formOnComplaint.form.page,total:t.formOnComplaint.total},on:{"size-change":t.sizeChange,"current-change":t.pageChange}})],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"申诉详情",visible:t.centerDialogVisible,width:"60%",center:""},on:{"update:visible":function(a){t.centerDialogVisible=a}}},[e("div",{staticClass:"box"},[e("p",[t._v("申诉状态 ："+t._s(t.infoText.status))]),t._v(" "),e("p",[t._v("申诉内容 ：\n                "),e("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},disabled:t.textStatus},model:{value:t.infoText.content,callback:function(a){t.$set(t.infoText,"content",a)},expression:"infoText.content"}})],1)]),t._v(" "),e("div",{staticClass:"box"},[e("h4",[t._v("订单详情")]),t._v(" "),e("el-row",[e("el-col",{attrs:{offset:1,span:10}},[e("span",[t._v("订单号："+t._s(t.rate.order_no))])]),t._v(" "),e("el-col",{attrs:{offset:1,span:10}},[t.infoText.goods_order?e("span",[t._v("店铺名称："+t._s(t.infoText.goods_order.order_shop.shop_info.name))]):t._e()])],1),t._v(" "),e("el-row",[e("el-col",{attrs:{offset:1,span:10}},[t.infoText.goods_order?e("span",[t._v("下单时间："+t._s(t.infoText.goods_order.order_shop.created_at))]):t._e()]),t._v(" "),e("el-col",{attrs:{offset:1,span:10}},[t.infoText.goods_order?e("span",[t._v("发货时间："+t._s(t.infoText.goods_order.order_shop.consigned_at))]):t._e()])],1),t._v(" "),e("p"),t._v(" "),e("table",{staticClass:"rateAppeal",staticStyle:{"border-collapse":"collapse","text-align":"center"},attrs:{width:"100%",border:"1",cellspacing:"0",cellpadding:"0"}},[e("tr",[e("td",[t._v("货号")]),t._v(" "),e("td",[t._v("商品名称")]),t._v(" "),e("td",[t._v("成交金额")]),t._v(" "),e("td",[t._v("用户id")])]),t._v(" "),e("tr",[t.infoText.goods_order?e("td",[t._v(t._s(t.infoText.goods_order.item_id))]):t._e(),t._v(" "),t.infoText.goods_order?e("td",[t._v(t._s(t.infoText.goods_order.title))]):t._e(),t._v(" "),t.infoText.goods_order?e("td",[t._v(t._s(t.infoText.goods_order.payment))]):t._e(),t._v(" "),t.infoText.goods_order?e("td",[t._v(t._s(t.rate.nickname))]):t._e()])])],1),t._v(" "),e("div",{staticClass:"box"},[e("h4",[t._v("评论详情")]),t._v(" "),""==t.rate.images?e("p",[t._v("没有晒图")]):t._e(),t._v(" "),e("el-row",[e("el-col",{attrs:{offset:1,span:10}},[e("p",[t._v("[初次评论]："+t._s(t.rate.content))]),t._v(" "),t.rate.images?e("p",{staticClass:"rateImg"},[e("span",[t._v("晒图：")]),t._l(t.rate.images,function(t,a){return e("img",{key:"img"+a,attrs:{src:t+"_t.jpg"}})})],2):t._e(),t._v(" "),e("p",[t._v("评论时间："+t._s(t.rate.created_at))])]),t._v(" "),e("el-col",{attrs:{offset:1,span:10}},[e("p",[t._v("[商家回复]："+t._s(t.rate.reply))])])],1)],1),t._v(" "),"等待审核"==t.infoText.status?e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.saveInfo(t.savaData)}}},[t._v("保 存")])],1):t._e()])],1)},staticRenderFns:[]};var l=e("C7Lr")(i,r,!1,function(t){e("qWLB")},"data-v-3931f734",null);a.default=l.exports},qWLB:function(t,a){}});