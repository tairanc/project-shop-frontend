webpackJsonp([23],{AsQO:function(e,t){},"a+wr":function(e,t){},bvNa:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("1G+u"),n=a("VXZc"),l=a("kIQj"),s=a("6PaB"),r={data:function(){return{total:0,page:1,page_size:20,list:[],free:[{label:"运费模板名称",field:"name",align:"center"},{label:"配送地址",field:"area_label",align:"center"},{label:"运费",field:"price",align:"center"}],weight:[{label:"配送地址",field:"area_label",align:"center"},{label:"首重（kg）",field:"start_standard",align:"center"},{label:"首费（元）",field:"start_freight",align:"center"},{label:"续重（kg）",field:"add_standard",align:"center"},{label:"续费（元）",field:"add_freight",align:"center"}],number:[{label:"配送地址",field:"area_label",align:"center"},{label:"首件（件）",field:"start_standard",align:"center"},{label:"首费（元）",field:"start_freight",align:"center"},{label:"续件（件）",field:"add_standard",align:"center"},{label:"续费（元）",field:"add_freight",align:"center"}]}},methods:{handleSizeChange:function(e){this.page_size=e,this.getList({page:this.page,page_size:this.page_size})},handleNumberChange:function(e){this.page=e,this.getList({page:this.page,page_size:this.page_size})},getList:function(e){var t=this;l.a.getDeliveryList(e).then(function(e){0===e.code&&(e.data.data.forEach(function(e){e.status_text=1===e.status?"启用":"禁用",e.is_free&&(e.all=[{name:e.name,area_label:"全国",price:"包邮"}]),1!=e.is_free&&3==e.valuation_type&&e.freight_conf.map(function(t){t.item_id=t.area_label,t.id=e.id,!t.upper&&(t.upper="∞")})}),t.list=e.data.data,t.total=e.data.total_count)})},addTempalte:function(){this.$router.push({name:"addtemplate"})},editTemplate:function(e){this.$router.push({path:"/goods-manage/logistics/edittemplate/"+e})},removeTemplate:function(e){var t=this;l.a.removeTemplate({template_id:e}).then(function(e){0===e.code&&(t.$message({type:"success",message:"删除模板成功"}),t.getList({page:t.page,page_size:t.page_size}))})},spanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex);if(0===e.columnIndex){var i=this.list.filter(function(e){return e.id==t.id}),n=Object(s.a)(i[0].freight_conf);return 1==n[a]?{rowspan:0,colspan:0}:0==n[a]?{rowspan:1,colspan:1}:{rowspan:n[a],colspan:1}}}},components:{TableView:i.a,PaginationView:n.a},created:function(){this.getList({page:this.page,page_size:this.page_size})}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addTempalte}},[e._v("新增运费模板")]),e._v(" "),e._l(e.list,function(t){return a("div",{staticClass:"template"},[a("div",{staticClass:"top"},[a("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticClass:"status"},[e._v(e._s(t.status_text))]),e._v(" "),a("span",{staticClass:"btn-group"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.editTemplate(t.id)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.removeTemplate(t.id)}}},[e._v("删除")])],1),e._v(" "),a("span",{staticClass:"time"},[e._v("最后修改时间："+e._s(t.updated_at))])]),e._v(" "),t.is_free?a("table-view",{staticClass:"bottom_table",attrs:{columns:e.free,pageList:t.all||[]}}):e._e(),e._v(" "),t.is_free||1!==t.valuation_type&&2!==t.valuation_type?e._e():a("table-view",{staticClass:"bottom_table",attrs:{columns:1===t.valuation_type?e.weight:e.number,pageList:t.freight_conf||[]}}),e._v(" "),t.is_free||3!==t.valuation_type?e._e():a("el-table",{staticClass:"bottom_table",attrs:{data:t.freight_conf||[],border:"",align:"center","span-method":e.spanMethod}},[a("el-table-column",{attrs:{align:"center",label:"配送地址",prop:"area_label"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"金额下限（元）",prop:"boundary"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"金额上限（元）",prop:"upper"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"运费（元）",prop:"freight"}})],1)],1)}),e._v(" "),a("pagination-view",{directives:[{name:"show",rawName:"v-show",value:e.list.length,expression:"list.length"}],attrs:{total:e.total,currentPage:e.page},on:{"size-change":e.handleSizeChange,"current-change":e.handleNumberChange}})],2)},staticRenderFns:[]};var c=a("C7Lr")(r,o,!1,function(e){a("AsQO"),a("a+wr")},"data-v-085507c8",null);t.default=c.exports}});