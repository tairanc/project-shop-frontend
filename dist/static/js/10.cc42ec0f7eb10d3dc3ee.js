webpackJsonp([10],{"SO/V":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("a3Yh"),n=i.n(s),a=i("1G+u"),o=i("wSwi"),c=i("VXZc"),l=i("Bkmr"),r={data:function(){var t;return t={selectVisible:!1,skus:[],only_sku_id:"",info_skus:"",id:[],centerDialogVisible:!1,suk_if:!1,value:"",type:"chip",options:[]},n()(t,"type","chip"),n()(t,"chipCodeList",[]),n()(t,"spec_text",""),n()(t,"total",0),n()(t,"form",{page:1,page_size:20}),n()(t,"goodsList",[]),n()(t,"chip_columns",[{label:"芯片编码",field:"chip_code",align:"center"}]),n()(t,"item_code",{item_id:"",sku_id:""}),t},methods:{handleSizeChange:function(t){this.form.page_size=t,this.initChipManager(this.form)},handleNumberChange:function(t){this.form.page=t,this.initChipManager(this.form)},handleVisible:function(t){this.selectVisible=t},deleteGoods:function(t){this.goodsList=this.goodsList.filter(function(e){return e.id!=t})},saveChips:function(){var t=this;l.a.saveChips().then(function(e){t.$router.push({name:"chip"})})},saveSelectedItem:function(t){var e=this;l.a.saveSelectedItem(t).then(function(t){e.spec_text=t.data.spec_text})},savaSku:function(){var t=document.getElementsByClassName("red");this.id=[];for(var e=0;e<t.length;e++)this.id.push(t[e].id);var i=this.id.join("_");this.item_code.sku_id=this.info_skus[i].sku_id,this.item_code.item_id=this.info_skus[i].item_id,this.saveSelectedItem(this.item_code),this.centerDialogVisible=!1},initChipManager:function(t){var e=this;l.a.initChipManager(t).then(function(t){for(var i in e.chipCodeList=[],t.data.chipInfo){var s={chip_code:""};s.chip_code=t.data.chipInfo[i],e.total=t.data.total,e.chipCodeList.push(s)}}).catch(function(t){console.log(t)})},handleAdd:function(t){var e=this;l.a.importItemsById({item_id:t}).then(function(t){var i=t.data,s="";if(!(0!=i.itemList.length&&i.itemList.length<2))return e.$message({message:"只能选择一个商品",type:"error"}),!1;if(e.goodsList=i.itemList,e.options=e.goodsList[0].skus,e.item_code.item_id=e.goodsList[0].skus[0].item_id,e.item_code.sku_id=e.goodsList[0].skus[0].sku_id,e.saveSelectedItem(e.item_code),e.options.length<2?e.suk_if=!0:e.suk_if=!1,0!=i.inValidItems.length)for(var n=0;n<i.inValidItems.length;n++)s+="<p>异常商品ID:"+i.inValidItems[n]+"</p>";if(0!=i.unsatisfiedItems.length)for(var a=0;a<i.unsatisfiedItems.length;a++)s+="<p>参加了不可叠加的商品:"+i.unsatisfiedItems[a]+"</p>";s&&e.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:s,type:"warning"})})},skuClick:function(t){var e=this;l.a.getSkuDetail(t).then(function(t){for(var i in e.info_skus=t.data.info.skus,e.skus=[],t.data.info.specs)e.skus.push(t.data.info.specs[i]);e.centerDialogVisible=!0})},xzClick:function(t,e){for(var i=0;i<t.target.parentNode.childNodes.length;i++)t.target.parentNode.childNodes[i].className="";t.target.className="red"},fh:function(){this.$router.push({name:"chip"})}},computed:{selectList:function(){var t=[];return this.goodsList.map(function(e){t.push(e.id)}),t}},components:{SelectGoods:o.a,TableView:a.a,PaginationView:c.a},created:function(){this.initChipManager(this.form)}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chip"},[i("el-button",{attrs:{type:"danger"},on:{click:function(e){t.selectVisible=!0}}},[t._v("选择商品")]),t._v(" "),i("p"),t._v(" "),i("select-goods",{attrs:{selectVisible:t.selectVisible,selectList:t.selectList,subType:t.type},on:{"visible-change":t.handleVisible,"choose-submit":t.handleAdd}}),t._v(" "),i("table",{staticStyle:{width:"100%"}},[t._m(0),t._v(" "),t._l(t.goodsList,function(e,s){return i("tr",{key:s,staticClass:"tdTc"},[i("td",[t._v(t._s(e.title))]),t._v(" "),i("td",[t.suk_if?i("span",{staticClass:"color"},[t._v("单规格商品不可编辑")]):t._e(),t._v(" "),i("span",[t._v(t._s(t.spec_text))]),t._v(" "),i("el-button",{attrs:{disabled:t.suk_if},on:{click:function(e){return t.skuClick({item_id:t.item_code.item_id})}}},[t._v("选择规格")])],1)])})],2),t._v(" "),i("p"),t._v(" "),i("h4",[t._v("芯片编码列表")]),t._v(" "),i("table-view",{ref:"goodsTable",attrs:{columns:t.chip_columns,pageList:t.chipCodeList}}),t._v(" "),i("pagination-view",{attrs:{total:t.total,currentPage:t.form.page},on:{"size-change":t.handleSizeChange,"current-change":t.handleNumberChange}}),t._v(" "),i("p"),t._v(" "),t._m(1),t._v(" "),i("el-dialog",{attrs:{title:"规格选择",visible:t.centerDialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[t._l(t.skus,function(e,s){return i("div",{key:s},[i("h4",[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"sku-dom"},t._l(e.values,function(e,s){return i("span",{key:s,attrs:{id:e.spec_value_id},on:{click:function(i){return t.xzClick(i,e.spec_value_id)}}},[t._v(t._s(e.text))])}),0),t._v(" "),i("p")])}),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.savaSku}},[t._v("确 定")])],1)],2),t._v(" "),i("p",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.saveChips}},[t._v("保存")]),t._v(" "),i("el-button",{on:{click:t.fh}},[t._v("取消")])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"chips"},[e("td",[this._v("商品名称")]),this._v(" "),e("td",[this._v("规格")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"color"},[e("p",[this._v("注:")]),this._v(" "),e("p",[this._v("1.最多一次性写入50条")]),this._v(" "),e("p",[this._v("2.数量默认为1")]),this._v(" "),e("p",[this._v("3.芯片写入后将不可更改商品")])])}]};var d=i("C7Lr")(r,u,!1,function(t){i("WEMf")},null,null);e.default=d.exports},"Sg+2":function(t,e,i){var s=i("2AZ7");s(s.S+s.F*!i("2gJQ"),"Object",{defineProperty:i("0hE2").f})},WEMf:function(t,e){},a3Yh:function(t,e,i){"use strict";e.__esModule=!0;var s,n=i("liLe"),a=(s=n)&&s.__esModule?s:{default:s};e.default=function(t,e,i){return e in t?(0,a.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},liLe:function(t,e,i){t.exports={default:i("oAx8"),__esModule:!0}},oAx8:function(t,e,i){i("Sg+2");var s=i("/KQr").Object;t.exports=function(t,e,i){return s.defineProperty(t,e,i)}}});