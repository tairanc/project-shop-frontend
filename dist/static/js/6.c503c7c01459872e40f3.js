webpackJsonp([6],{"6DQA":function(e,t){},LpFL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("VXZc"),i=n("1G+u"),s=n("S7CR"),l={data:function(){var e=this;return{isfullreduce:!0,loading:!1,coupon_id:void 0,list:[],total:0,pageInfo:{page:1,page_size:20},columns:[{label:"活动ID",field:"id",align:"center"},{label:"活动名称",field:"name",align:"center"},{label:"活动规则",field:"ruleStr",align:"center"},{label:"开始时间",field:"start_time",align:"center"},{label:"结束时间",field:"end_time",align:"center"},{label:"商品数量",field:"itemCount",align:"center"},{label:"创建时间",field:"created_at",align:"center"},{label:"活动状态",field:"status",align:"center",tags:[{index:10,name:"即将开始",type:"danger"},{index:30,name:"进行中",type:"success"},{index:40,name:"已结束",type:"warning"},{index:50,name:"已关闭",type:"info"}]},{label:"操作",align:"center",width:180,actions:[{label:"查看",type:"text",size:"medium",disable:function(e,t){return 0==!t},click:function(t,n){e.getDetail(n)}},{label:"编辑",type:"text",size:"medium",disable:function(e,t){return 30==e.status||40==e.status||50==e.status},click:function(t,n){e.editCoupon(n.id)}},{label:"删除",type:"text",size:"medium",disable:function(e,t){return 30==e.status||40==e.status||50==e.status},click:function(t,n){e.$confirm("删除后将不可领取及不可使用，确定要删除？","删除提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteCoupon(n.id)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}},{label:"关闭",type:"text",size:"medium",disable:function(e,t){return 30!=e.status},click:function(t,n){e.$confirm("是否关闭当前活动？","关闭提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.closeCoupon(n.id)}).catch(function(){e.$message({type:"info",message:"已取消关闭"})})}}]}]}},components:{TableView:i.a,PaginationView:a.a},methods:{getDatalist:function(e){var t=this;s.a.getShopList(e,this.isfullreduce).then(function(e){t.list=e.data.data,t.list.map(function(e){0==e.limit_money&&(e.limit_money="/")}),t.total=e.data.total_count})},addPlay:function(){var e=this.isfullreduce?"addBreakReduce":"addFullReduce";this.$router.push({name:e})},getDetail:function(e){var t=this.isfullreduce?"reduceBreakDetail":"reduceFullDetail";this.$router.push({name:t,query:{id:e.id,status:e.status}})},editCoupon:function(e){var t=this.isfullreduce?"editBreakReduce":"editFullReduce";this.$router.push({name:t,query:{id:e}})},deleteCoupon:function(e){var t=this;s.a.deleteCoupon({promotion_id:e},this.isfullreduce).then(function(e){e.data&&(t.$message({type:"success",message:"删除成功!",duration:1e3}),t.getDatalist(t.pageInfo))})},closeCoupon:function(e){var t=this;s.a.closeCoupon({promotion_id:e},this.isfullreduce).then(function(e){e.data&&(t.$message({type:"success",message:"关闭成功!",duration:1e3}),t.getDatalist(t.pageInfo))})},sizeChange:function(e){this.pageInfo.page_size=e,this.getDatalist(this.pageInfo)},pageChange:function(e){this.pageInfo.page=e,this.getDatalist(this.pageInfo)}},created:function(){this.isfullreduce="reducebreak"===this.$route.name,this.getDatalist(this.pageInfo)},watch:{$route:function(e,t){this.isfullreduce="reducebreak"===e.name,this.pageInfo.page=1,this.getDatalist(this.pageInfo)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"reduce"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{attrs:{type:"primary"},on:{click:e.addPlay}},[n("span",{staticClass:"el-icon-plus"}),e._v("\n          添加"+e._s(e.isfullreduce?"满折":"满减")+"活动\n      ")])],1)],1),e._v(" "),n("el-tabs",[n("table-view",{attrs:{loading:e.loading,columns:e.columns,pageList:e.list}}),e._v(" "),n("pagination-view",{attrs:{currentPage:e.pageInfo.page,total:e.total},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)],1)},staticRenderFns:[]};var o=n("C7Lr")(l,u,!1,function(e){n("6DQA")},"data-v-2e799380",null);t.default=o.exports}});