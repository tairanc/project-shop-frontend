webpackJsonp([31],{DLC2:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=t("3cXf"),o=t.n(i),a=t("wSwi"),l=t("kvg+"),n=t("V6yb"),d={data:function(){return{coupon_id:"",message:{},addVisibleid:!1,goodsIds:"",selectVisible:!1,goodsList:[]}},computed:{selectList:function(){var e=[];return this.goodsList.length&&this.goodsList.map(function(s){e.push(s.id)}),e}},methods:{getShopCrossCoupon:function(e){var s=this;n.a.getShopCrossCoupon(e).then(function(e){0==e.code&&(s.message=e.data)})},getCouponAppliedItems:function(e){var s=this;n.a.getCouponAppliedItems(e).then(function(e){0==e.code&&(s.goodsList=e.data.list)})},addItemBomb:function(){this.addVisibleid=!0,this.goodsIds=""},addGoodsById:function(){var e=this;this.goodsIds&&l.a.importItemsById({item_id:this.goodsIds}).then(function(s){var t=s.data,i="";if(0!=t.itemList.length&&e.goodsFilter(t.itemList),0!=t.inValidItems.length)for(var o=0;o<t.inValidItems.length;o++)i+="<p>异常商品ID:"+t.inValidItems[o]+"</p>";if(0!=t.unsatisfiedItems.length)for(var a=0;a<t.unsatisfiedItems.length;a++)i+="<p>参加了不可叠加的商品:"+t.unsatisfiedItems[a]+"</p>";i&&e.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:i,type:"warning"})}),this.goodsIds="",this.addVisibleid=!1},goodsFilter:function(e){for(var s=0;s<e.length;s++){var t=!1;if(0!=this.goodsList.length)for(var i=0;i<this.goodsList.length;i++)e[s].id==this.goodsList[i].id&&(t=!0);t||this.goodsList.push(e[s])}var o=[];e.map(function(e){o.push(e.id)});for(var a=0;a<this.goodsList.length;a++)-1==o.indexOf(this.goodsList[a].id)&&(this.goodsList.splice(a,1),a--)},handleVisible:function(e){this.selectVisible=e},handleDelete:function(e){this.goodsList=this.goodsList.filter(function(s){return s.id!=e.id})},handleAdd:function(e){var s=this;l.a.importItemsById({item_id:e}).then(function(e){var t=e.data,i="";if(0!=t.itemList.length&&s.goodsFilter(t.itemList),0!=t.inValidItems.length)for(var o=0;o<t.inValidItems.length;o++)i+="<p>异常商品ID:"+t.inValidItems[o]+"</p>";if(0!=t.unsatisfiedItems.length)for(var a=0;a<t.unsatisfiedItems.length;a++)i+="<p>参加了不可叠加的商品:"+t.unsatisfiedItems[a]+"</p>";i&&s.$message({showClose:!0,dangerouslyUseHTMLString:!0,message:i,type:"warning"})})},handleSubmit:function(){var e=this,s=[];this.goodsList.map(function(e){s.push({item_id:e.id})}),n.a.apply({coupon_id:this.coupon_id,items:o()(s)}).then(function(s){0==s.code&&(e.$message({showClose:!0,message:"报名成功",type:"success"}),e.$router.push({name:"shoplist"}))})},goBack:function(){this.$router.go(-1)}},components:{SelectGoods:a.a},created:function(){this.coupon_id=this.$route.query.coupon_id,this.getShopCrossCoupon({coupon_id:this.coupon_id}),this.getCouponAppliedItems({coupon_id:this.coupon_id,page:1,page_size:-1})}},_={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"detail"},[t("div",{staticClass:"content"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.message.refuse_reason,expression:"message.refuse_reason"}],staticClass:"reason"},[e._v("审核驳回原因： "+e._s(e.message.refuse_reason))]),e._v(" "),t("h3",[e._v("优惠券信息")]),e._v(" "),t("el-row",[t("el-col",[t("p",[e._v("优惠券ID： "+e._s(e.message.id))])]),e._v(" "),t("el-col",[t("p",[e._v("优惠券名称： "+e._s(e.message.name))])]),e._v(" "),t("el-col",[t("p",[e._v("优惠券兑换码： "+e._s(e.message.exchangeCode))])]),e._v(" "),t("el-col",[t("p",[e._v("门槛金额： "+e._s(e.message.limit_money)+"元")])]),e._v(" "),t("el-col",[t("p",[e._v("优惠金额： "+e._s(e.message.deduct_money)+"元")])]),e._v(" "),t("el-col",[t("p",[e._v("商家费用承担： "+e._s(e.message.undertake_percent))])]),e._v(" "),t("el-col",[t("p",[e._v("发放数量： "+e._s(e.message.send_quantity)+"张")])]),e._v(" "),t("el-col",[t("p",[e._v("每人每张限领： "+e._s(e.message.user_obtain_limit)+"张")])]),e._v(" "),t("el-col",[t("p",[e._v("是否显示入口： "+e._s(e.message.is_show?"是":"否"))])]),e._v(" "),t("el-col",[t("p",[e._v("适用平台： "+e._s(e.message.applicable_platform))])]),e._v(" "),t("el-col",[t("p",[e._v("适用店铺： "+e._s(e.message.applicable_shop_type))])]),e._v(" "),t("el-col",[t("p",[e._v("适用分类： "+e._s(e.message.applicable_category))])]),e._v(" "),t("el-col",[t("p",[e._v("适用品牌： "+e._s(e.message.applicable_brand))])]),e._v(" "),t("el-col",[t("p",[e._v("创建时间： "+e._s(e.message.created_at))])]),e._v(" "),t("el-col",[t("p",[e._v("报名开始时间： "+e._s(e.message.apply_start_time))])]),e._v(" "),t("el-col",[t("p",[e._v("报名结束时间： "+e._s(e.message.apply_end_time))])]),e._v(" "),t("el-col",[t("p",[e._v("发布时间： "+e._s(e.message.release_time))])]),e._v(" "),t("el-col",[t("p",[e._v("领取开始时间： "+e._s(e.message.obtain_start_time))])]),e._v(" "),t("el-col",[t("p",[e._v("领取结束时间： "+e._s(e.message.obtain_end_time))])]),e._v(" "),t("el-col",[t("p",[e._v("使用开始时间： "+e._s(e.message.use_start_time))])]),e._v(" "),t("el-col",[t("p",[e._v("使用结束时间： "+e._s(e.message.use_end_time))])]),e._v(" "),t("el-col",[t("div",{staticClass:"shopdetail-tag"},[t("div",{staticClass:"shopdetail-tag-title"},[e._v("活动标签展示：")]),e._v(" "),e.message.tag_list&&e.message.tag_list.length>0?t("div",{staticClass:"tag-content"},e._l(e.message.tag_list,function(s,i){return t("div",{key:i,staticClass:"img-list"},[t("img",{staticClass:"img",attrs:{src:s.mb_square_img,alt:""}}),e._v(" "),t("span",[e._v(e._s(s.show_start_time))]),e._v(" "),t("span",{staticClass:"margin10"},[e._v("-")]),e._v(" "),t("span",[e._v(e._s(s.show_end_time))])])}),0):t("div",{staticClass:"tag-withno"},[e._v("无")])])])],1),e._v(" "),t("div",[t("h3",[e._v("适用商品")]),e._v(" "),t("p",[t("el-button",{attrs:{type:"primary"},on:{click:function(s){e.selectVisible=!0}}},[e._v("选择商品")]),e._v(" "),t("el-button",{on:{click:e.addItemBomb}},[e._v("批量导入商品")])],1),e._v(" "),t("div",{staticClass:"table"},[t("el-table",{attrs:{data:e.goodsList,border:""}},[t("el-table-column",{attrs:{align:"center",label:"商品ID",prop:"id"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("a",{staticClass:"goods_url",attrs:{href:e.defaultUrl("item_id",s.row),target:"_blank"}},[e._v(e._s(s.row.title))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"标准售价（元）",prop:"sell_price"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDelete(s.row)}}},[e._v("删除")])]}}])})],1)],1)]),e._v(" "),t("el-row",[t("el-col",{attrs:{offset:10}},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),e._v(" "),t("el-button",{on:{click:e.goBack}},[e._v("返回")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{width:"500px",title:"请输入商品ID，多个商品ID需用逗号间隔输入",visible:e.addVisibleid},on:{"update:visible":function(s){e.addVisibleid=s}}},[t("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入商品ID"},model:{value:e.goodsIds,callback:function(s){e.goodsIds=s},expression:"goodsIds"}}),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.addVisibleid=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.addGoodsById}},[e._v("确 定")])],1)],1),e._v(" "),t("select-goods",{attrs:{selectVisible:e.selectVisible,selectList:e.selectList},on:{"visible-change":e.handleVisible,"choose-submit":e.handleAdd}})],1)},staticRenderFns:[]};var c=t("C7Lr")(d,_,!1,function(e){t("tO9z")},"data-v-fe0842c6",null);s.default=c.exports},tO9z:function(e,s){}});