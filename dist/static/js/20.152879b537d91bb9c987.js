webpackJsonp([20],{"1MEb":function(t,e){},GJKk:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("VXZc"),s=(i("1G+u"),i("iVs4")),n=i("elHK"),r={data:function(){return{newdata:"",list:[],rates:[],vipName:[]}},methods:{getShopCategoryList:function(){var t=this;s.a.getShopCategoryList().then(function(e){for(var i in t.total=e.data.total_count,t.list=[],t.rates=[],t.vipName=[],e.data.level_names)t.vipName.push(e.data.level_names[i]);for(var a in e.data.list){var s=e.data.list[a].remain_time;if(null==e.data.list[a].effecting_rates)e.data.list[a].effecting_rates=[{val:0,remain_time:s}];else{var n=[];for(var r in e.data.list[a].effecting_rates){var o=1*(1*r+1),l={val:0,remain_time:s};l.val=e.data.list[a].effecting_rates[r][o],n.push(l)}e.data.list[a].rates=n}t.list.push(e.data.list[a]),t.$set(e.data.list[a],"edit",!1)}})},handleEdit:function(t){this.list.map(function(e){e.category_id==t.category_id&&(e.edit=!0)})},handleSave:function(t){var e=this,i={category_id:t.category_id,rates:[]},a=[];for(var n in t.rates){var r={};r[1*(1*n+1)]=t.rates[n].val,a.push(r)}i.rates=a,s.a.setCategoryRates(i).then(function(i){t.edit=!1,e.getShopCategoryList()})}},computed:{},created:function(){this.getShopCategoryList()},components:{PaginationView:a.a,CountDown:n.a}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cateList"},[i("table",{staticStyle:{"border-collapse":"collapse"},attrs:{width:"100%"}},[i("tr",{staticClass:"goodsBonus_title"},[i("td",[t._v("一级分类")]),t._v(" "),t._l(t.vipName,function(e,a){return i("td",{key:a},[t._v("\n                "+t._s(e.name)+"提成比率\n            ")])}),t._v(" "),i("td",[t._v("\n                操作\n            ")])],2),t._v(" "),t._l(t.list,function(e,a){return i("tr",{key:a},[i("td",{staticClass:"tc"},[t._v("\n                "+t._s(e.name)+"\n            ")]),t._v(" "),t._l(e.rates,function(a,s){return i("td",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!goods.edit"}],key:s,staticClass:"tc"},[i("span",[t._v(t._s(a.val)+"%\n                    "),i("el-popover",{directives:[{name:"show",rawName:"v-show",value:a.remain_time,expression:"rate.remain_time"}],attrs:{placement:"right",width:"210",trigger:"hover"}},[i("span",[t._v("距该修改生效还需时间:"),i("count-down",{attrs:{endTime:a.remain_time}})],1),t._v(" "),i("i",{staticClass:"el-icon-time",staticStyle:{color:"#409EFF"},attrs:{slot:"reference",icon:"el-icon-time"},slot:"reference"})])],1)])}),t._v(" "),t._l(e.rates,function(a,s){return i("td",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"goods.edit"}],key:"key"+s,staticClass:"tc"},[i("el-input",{staticStyle:{width:"100px"},model:{value:a.val,callback:function(e){t.$set(a,"val",e)},expression:"rate.val"}}),t._v("%\n            ")],1)}),t._v(" "),i("td",{staticClass:"tc",staticStyle:{color:"#409EFF"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!goods.edit"}]},[i("a",{on:{click:function(i){return t.handleEdit(e)}}},[t._v("编辑")])]),t._v(" "),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.edit,expression:"goods.edit"}],attrs:{type:"primary"},on:{click:function(i){return t.handleSave(e)}}},[t._v("保存修改")])],1)],2)})],2)])},staticRenderFns:[]};var l=i("C7Lr")(r,o,!1,function(t){i("1MEb")},null,null);e.default=l.exports},elHK:function(t,e,i){"use strict";var a={data:function(){return{time:"",flag:!1,h:"",m:"",s:"",endTime:this.endTime}},props:{endTime:{type:String,default:""}},mounted:function(){var t=this,e=setInterval(function(){1==t.flag&&(clearInterval(e),window.location.reload()),t.timeDown()},1e3)},methods:{timeDown:function(){var t=this.endTime.split(":"),e=this.formate(t[0]),i=this.formate(t[1]),a=this.formate(t[2]);this.h=1*e,this.m=1*i,this.s=1*a,0==this.h&&0==this.m&&0==this.s?this.flag=!0:(this.s<=0?(this.s=59,this.m--):this.m<=0&&0!=this.h?(this.m=59,this.h--):this.s--,this.endTime=this.formate(this.h)+":"+this.formate(this.m)+":"+this.formate(this.s),this.time=this.endTime)},formate:function(t){return t>=10?t:"0"+t}}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v("\n    "+this._s(this.time)+"\n")])},staticRenderFns:[]},n=i("C7Lr")(a,s,!1,null,null,null);e.a=n.exports}});